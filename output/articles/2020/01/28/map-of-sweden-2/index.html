<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Mats Melander" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="D3, Maps, Technologies, " />

<meta property="og:title" content="Map of Sweden #2 "/>
<meta property="og:url" content="https://wlog.viltstigen.se/articles/2020/01/28/map-of-sweden-2/" />
<meta property="og:description" content="Introduction In a previous post, I showed how to make a map of Sweden as a SVG object, derived from geometrical information, using D3. Here, I will focus of collecting meteorological observations from SMHI and create a simple HTTP-server that will respond with the data when requested. This will be …" />
<meta property="og:site_name" content="Wolfblog" />
<meta property="og:article:author" content="Mats Melander" />
<meta property="og:article:published_time" content="2020-01-28T00:00:00+01:00" />
<meta property="og:article:modified_time" content="2020-01-28T00:00:00+01:00" />
<meta name="twitter:title" content="Map of Sweden #2 ">
<meta name="twitter:description" content="Introduction In a previous post, I showed how to make a map of Sweden as a SVG object, derived from geometrical information, using D3. Here, I will focus of collecting meteorological observations from SMHI and create a simple HTTP-server that will respond with the data when requested. This will be …">

        <title>Map of Sweden #2  · Wolfblog
</title>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="https://wlog.viltstigen.se/theme/css/elegant.prod.css" media="screen">
        <link rel="stylesheet" type="text/css" href="https://wlog.viltstigen.se/theme/css/custom.css" media="screen">

        <link href="https://wlog.viltstigen.se/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Wolfblog - Full Atom Feed" />
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-97010459-1', 'auto');
    ga('send', 'pageview');
</script>


    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="https://wlog.viltstigen.se/"><span class=site-name>Wolfblog</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       https://wlog.viltstigen.se
                                    >Home</a>
                                </li>
                                <li ><a href="https://wlog.viltstigen.se/pages/about/">About</a></li>
                                <li ><a href="https://wlog.viltstigen.se/categories.html">Categories</a></li>
                                <li ><a href="https://wlog.viltstigen.se/tags.html">Tags</a></li>
                                <li ><a href="https://wlog.viltstigen.se/archives.html">Archives</a></li>
                                <li><form class="navbar-search" action="https://wlog.viltstigen.se/search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="https://wlog.viltstigen.se/articles/2020/01/28/map-of-sweden-2/">
                Map of Sweden #2
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <div class="section" id="introduction">
<h2>Introduction</h2>
<p>In a previous post, I showed how to make a map of Sweden as a SVG object, derived from geometrical information,
using D3. Here, I will focus of collecting meteorological observations from <a class="reference external" href="https://opendata.smhi.se/apidocs/metobs/index.html">SMHI</a>
and create a simple HTTP-server that will respond with the data when requested. This will be made through 2 simple
python scripts.</p>
</div>
<div class="section" id="the-scripts">
<h2>The scripts</h2>
<p>There are two python 3.x scripts doing the work</p>
<ul class="simple">
<li><strong>collector.py:</strong> This script will traverse the SMHI REST API and store the data in JSON format in a file.
I have automated this script running once per day through crontab.</li>
<li><strong>emitter.py:</strong> This script is implemented as a HTTP-server, running as a background daemon. When it receives a
GET-request, it will read the JSON file, created by collector.py and respond to the client.</li>
</ul>
<p>I am using tools to have the workings of <strong>emitter.py</strong>; <a class="reference external" href="http://flask.pocoo.org/">Flask</a>,
<a class="reference external" href="https://gunicorn.org/">Gunicorn</a> and <a class="reference external" href="http://supervisord.org/introduction.html">Supervisor</a>.
They will be described below, but first I will start with installing them into a Python virtual environment.
In <strong>collector.py</strong> I will use requests library to access the SMHI observations, this library needs to be installed as well.</p>
<div class="section" id="installation">
<h3>Installation</h3>
<p>Assuming a &quot;clean&quot; raspberry pi in target (in my case named <strong>rpi2</strong>) do as below.
This will install <strong>pip</strong>, <strong>virtualenv</strong>, <strong>virtualenwrapper</strong>, <strong>autoenv</strong> and <strong>supervisor</strong> systemwide.
Following that I create the virtual environment clover using python3. <strong>requests</strong>, <strong>flask</strong> and <strong>gunicorn</strong> are
installed into the virtual environment, thus not system wide.</p>
<div class="highlight"><pre><span></span>$ sudo apt-get update
$ sudo apt-get install python-setuptools
$ sudo easy_install pip
$ sudo pip install virtualenv
$ sudo pip install virtualenvwrapper
$ sudo pip install autoenv
$ sudo apt-get install supervisor
$ mkvirtualenv --python<span class="o">=</span>/usr/bin/python3 clover
$ workon clover
<span class="o">(</span>clover<span class="o">)</span> $ pip3 install requests
<span class="o">(</span>clover<span class="o">)</span> $ pip3 install flask
<span class="o">(</span>clover<span class="o">)</span> $ pip3 install gunicorn
</pre></div>
<p>Now everything should be installed.</p>
</div>
</div>
<div class="section" id="smhi-meteorological-observations">
<h2>SMHI meteorological observations</h2>
<p>Time to find out how we access the meteorological observations.
This is how it is described by SMHI</p>
<blockquote>
The service is constructed as a REST API for easy access. The Entry point is located at
<a class="reference external" href="https://opendata-download-metobs.smhi.se/api">https://opendata-download-metobs.smhi.se/api</a>. From here a client can traverse down by following links through
the levels until a specific data resource is available.</blockquote>
<p>The <strong>collector.py</strong> script use <a class="reference external" href="http://opendata-download-metobs.smhi.se/api.json">http://opendata-download-metobs.smhi.se/api.json</a> as the starting point to access
observations. SMHI expose data in 3 different formats: 1) JSON 2) XML 3) CSV, I will only care about JSON.</p>
<p>There is a multitude of observations that can be accessed, for my purpose a subset of these will do:</p>
<ul class="simple">
<li><strong>Temp:</strong> Momentary value of air temperature, updated once per hour</li>
<li><strong>Average temp:</strong> Average air temperature for 1 day (24 h), at 00:00</li>
<li><strong>Rain:</strong> Sum once per day, at 06:00</li>
<li><strong>Relative humidity:</strong> Momentary value, once per hour</li>
<li><strong>Snow depth:</strong> Momentary value, once per hour</li>
<li><strong>Air pressure:</strong> At sea level, momentary value, once per hour</li>
<li><strong>Lowest cloud layer:</strong> Momentary value, once per hour</li>
</ul>
<p>I also collect <strong>Wind Direction</strong> and <strong>Wind Speed</strong> (average values over 10 min, once per hour) but these values are not used.</p>
<p>A Jupyter notebook is available <a class="reference external" href="https://github.com/Wolfrax/clover/tree/master/blog/Part%202">here</a> to show a
simple interaction.</p>
<p>For each data set, there are some meta-data available, such as:</p>
<ul class="simple">
<li><strong>Latitude and Longitude</strong> for each station</li>
<li><strong>Name</strong> of station</li>
<li><strong>Active</strong>, some stations might be inactive</li>
<li><strong>Update</strong>, when the data was updated</li>
</ul>
<p>All of above is collected together with the value of the observation into a structure by the collector script.</p>
<p><strong>Note this</strong> The stations will be different for each observation, e.g. the number of stations where rain observations
are available is larger than the number of stations for the air pressure observations. Therefore, we need to traverse
the API once per requested observation. To make the collector script somewhat more efficient it creates thread for
each observation so that the procedure is parallelized.</p>
<p>The final result is stored in the file <strong>weather.js</strong>.</p>
<p>The <strong>collector.py</strong> script is executed once per day using crontab. The entry in crontab is</p>
<div class="highlight"><pre><span></span><span class="m">00</span> <span class="m">1</span>    * * *   pi      /usr/bin/python3 /home/pi/app/clover/py/collector.py &gt;&gt; /var/log/clover.log <span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
</pre></div>
<p>Note that the script is executed as user &quot;pi&quot; and that any printout from the script is collected into
<tt class="docutils literal">/var/log/clover.log</tt>. Ensure that the <strong>collector.py</strong> script have execution attribute set, that the
<strong>clover.log</strong> file exist in <strong>/var/log</strong> and is possible to write into. Use <strong>chmod</strong> and <strong>chown</strong> commands to do this.</p>
<p>The collector.py is short, not very complicated and available <a class="reference external" href="https://github.com/Wolfrax/clover/blob/master/py/collector.py">here</a> on GitHub.
The net result is a file, <strong>weather.js</strong>, in JSON format. The file name is hardcoded in the script as
<strong>../data/weather.js</strong>.</p>
<p>The beginning of the file looks like this</p>
<div class="highlight"><pre><span></span><span class="o">{</span>
    <span class="s2">&quot;date&quot;</span>: <span class="s2">&quot;2019-03-07&quot;</span>,
    <span class="s2">&quot;temp&quot;</span>: <span class="o">[{</span>
        <span class="s2">&quot;station&quot;</span>: <span class="s2">&quot;Abisko&quot;</span>,
        <span class="s2">&quot;updated&quot;</span>: <span class="m">1551985200000</span>,
        <span class="s2">&quot;lon&quot;</span>: <span class="m">18</span>.816546,
        <span class="s2">&quot;lat&quot;</span>: <span class="m">68</span>.354122,
        <span class="s2">&quot;active&quot;</span>: true,
        <span class="s2">&quot;val&quot;</span>: -15.5
    <span class="o">}</span>, <span class="o">{</span>
...
<span class="o">}</span>
</pre></div>
<p>The full file includes all stations for key temp. Other keys in the file are</p>
<ul class="simple">
<li><strong>avg_temp</strong></li>
<li><strong>wind_dir</strong> (not used)</li>
<li><strong>wind_speed</strong> (not used)</li>
<li><strong>rain</strong></li>
<li><strong>rel_moisture</strong> (humidity)</li>
<li><strong>snow_depth</strong></li>
<li><strong>pressure</strong></li>
<li><strong>lowest_cloud</strong></li>
</ul>
<p>The javascript that is accessing the data must use the exact key names shown above.</p>
</div>
<div class="section" id="emitter">
<h2>Emitter</h2>
<p>The last script to explain is <strong>emitter.py</strong>. This script is really short, the purpose of the script is to listen on
for HTTP GET-requests on the URI <strong>/clover_data</strong>, read the <strong>weather.js</strong> file and return the content to the HTTP client.
It is doing this through <strong>Gunicorn</strong> and <strong>Flask</strong>. The rationale for doing it this way is my local infrastructure
of raspberries.</p>
<p>My domain is <a class="reference external" href="https://www.viltstigen.se">https://www.viltstigen.se</a>, and I have one raspberry (<strong>rpi1</strong>) as HTTP server listening on port 80 and 443.
The collector script is executing on another raspberry (<strong>rpi2</strong>) upstream of <strong>rpi1</strong>.
The way to implement this is to use <a class="reference external" href="https://nginx.org/en/">nginx</a> as HTTP and proxy server on both <strong>rpi1</strong> and <strong>rpi2</strong>.</p>
<p>I need to configure nginx on <strong>rpi1</strong> to distribute requests to clover to <strong>rpi2</strong>.</p>
<div class="highlight"><pre><span></span><span class="k">location</span> <span class="s">/clover</span> <span class="p">{</span>
    <span class="kn">try_files</span> <span class="nv">$uri</span> <span class="nv">$uri/</span> <span class="nv">$uri/index.html</span> <span class="nv">$uri.html</span> <span class="s">@clover</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">location</span> <span class="s">@clover</span> <span class="p">{</span>
    <span class="c1"># proxy_pass http://rpi2.local; Note, a static IP address makes nginx more robust in case rpi1 is not running</span>
    <span class="kn">proxy_pass</span> <span class="s">http://192.168.1.51</span><span class="p">;</span>
    <span class="kn">proxy_redirect</span>     <span class="no">off</span><span class="p">;</span>
    <span class="kn">proxy_set_header</span>   <span class="s">Host</span> <span class="nv">$host</span><span class="p">;</span>
    <span class="kn">proxy_set_header</span>   <span class="s">X-Real-IP</span> <span class="nv">$remote_addr</span><span class="p">;</span>
    <span class="kn">proxy_set_header</span>   <span class="s">X-Forwarded-For</span> <span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span>
    <span class="kn">proxy_set_header</span>   <span class="s">X-Forwarded-Host</span> <span class="nv">$server_name</span><span class="p">;</span>
    <span class="kn">proxy_read_timeout</span> <span class="mi">300</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">location</span> <span class="s">/clover_data</span> <span class="p">{</span>
    <span class="kn">try_files</span> <span class="nv">$uri</span> <span class="nv">$uri/</span> <span class="nv">$uri/index.html</span> <span class="nv">$uri.html</span> <span class="s">@clover_data</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">location</span> <span class="s">@clover_data</span> <span class="p">{</span>
    <span class="c1"># proxy_pass http://rpi2.local; Note, a static IP address makes nginx more robust in case rpi1 is not running</span>
    <span class="kn">proxy_pass</span> <span class="s">http://192.168.1.51:8096</span><span class="p">;</span>
    <span class="kn">proxy_redirect</span>     <span class="no">off</span><span class="p">;</span>
    <span class="kn">proxy_set_header</span>   <span class="s">Host</span> <span class="nv">$host</span><span class="p">;</span>
    <span class="kn">proxy_set_header</span>   <span class="s">X-Real-IP</span> <span class="nv">$remote_addr</span><span class="p">;</span>
    <span class="kn">proxy_set_header</span>   <span class="s">X-Forwarded-For</span> <span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span>
    <span class="kn">proxy_set_header</span>   <span class="s">X-Forwarded-Host</span> <span class="nv">$server_name</span><span class="p">;</span>
    <span class="kn">proxy_read_timeout</span> <span class="mi">300</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>When a HTTP client access the URI <a class="reference external" href="https://www.viltstigen.se/clover">https://www.viltstigen.se/clover</a>, <strong>rpi1</strong> will pass this to <strong>rpi2</strong>.
Similar, if a client access <a class="reference external" href="https://www.viltstigen.se/clover_data">https://www.viltstigen.se/clover_data</a>, <strong>rpi1</strong> will pass the request upstream to <strong>rpi2</strong> on
port 8096. As my raspberries is protected by the uncomplicated firewall (ufw), the ports on <strong>rpi2</strong> needs to be configured
to allow the traffic through these commands</p>
<div class="highlight"><pre><span></span>$ sudo ufw allow from <span class="m">192</span>.168.1.0/24 to any port <span class="m">8096</span>
$ sudo ufw allow from <span class="m">192</span>.168.1.0/24 to any port <span class="m">80</span>
</pre></div>
<p>Now an external HTTP-client can access <strong>rpi2</strong> through <strong>rpi1</strong>.</p>
<p>On <strong>rpi2</strong> a WSGI server is listening on port 8096 and executing a Flask application in the emitter script.
As the WSGI server is running as a daemon I use supervisor to control this. Supervisor is configured in the file
<strong>clover_gunicorn.conf</strong> (softlinked from <strong>/etc/supervisor/conf.d</strong> directory), the content looks like this</p>
<div class="highlight"><pre><span></span><span class="o">[</span>program:clover_gunicorn<span class="o">]</span>
<span class="nb">command</span> <span class="o">=</span> /home/pi/.virtualenvs/clover/bin/gunicorn -b :8096 --reload emitter:app
<span class="nv">directory</span> <span class="o">=</span> /home/pi/app/clover/py
<span class="nv">user</span> <span class="o">=</span> root
<span class="nv">autostart</span> <span class="o">=</span> <span class="nb">true</span>
<span class="nv">autorestart</span> <span class="o">=</span> <span class="nb">true</span>
<span class="nv">startretries</span><span class="o">=</span><span class="m">3</span>
<span class="nv">stdout_logfile</span> <span class="o">=</span> /var/log/supervisor/clover_gunicorn.log
<span class="nv">stderr_logfile</span> <span class="o">=</span> /var/log/supervisor/clover_gunicorn.err
</pre></div>
<p>This tells supervisor to execute gunicorn, bind it to port 8096 executing the Flask application &quot;app&quot; in module
&quot;emitter&quot;. It will automatically reload the Flask application if any changes are made.</p>
<p>Finally, the core of the Flask application is (the actual script includes more error handling than shown below)</p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">jsonify</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/clover_data&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_data</span><span class="p">():</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;/var/local/clover_weather.js&quot;</span>  <span class="c1"># Hardcoded filename</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;0.0.0.0&#39;</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
<p>Above tells us that the Flask application will respond to the URI <strong>/clover_data</strong> by reading the file
<strong>/var/local/clover_weather.js</strong> (which I have symlinked to the actual file weather.js) and returning the content as a
JSON formatted string. Flask is running in debug mode, in case I would like to use this debug mode,
I issue these commands:</p>
<div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">FLASK_APP</span><span class="o">=</span>emitter.py
$ <span class="nb">export</span> <span class="nv">FLASK_DEBUG</span><span class="o">=</span><span class="m">1</span>
$ flask run --host<span class="o">=</span><span class="m">0</span>.0.0.0 --port<span class="o">=</span><span class="m">8096</span>
</pre></div>
<p>and access the URI <a class="reference external" href="https://rpi2.local:8096/clover_data">https://rpi2.local:8096/clover_data</a> from a web browser.</p>
</div>



             


<script src="https://wlog.viltstigen.se/theme/applause-button/applause-button.js"></script>
<div class="applause_button">
    <applause-button url=https://wlog.viltstigen.se/articles/2020/01/28/map-of-sweden-2/> </applause-button>
</div>

 
            
            
            






            <hr/>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2020-01-28T00:00:00+01:00">Jan 28, 2020</time>

            <h4>Category</h4>
            <a class="category-link" href="https://wlog.viltstigen.se/categories.html#technologies-ref">Technologies</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="https://wlog.viltstigen.se/tags.html#d3-ref">D3
                    <span>4</span>
</a></li>
                <li><a href="https://wlog.viltstigen.se/tags.html#maps-ref">Maps
                    <span>4</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
    <a href="mailto:mats.melander@gmail.com" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="Mail" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#328cff"/><path d="m250 186c-46 0-69 35-69 74 0 44 29 72 68 72 43 0 73-32 73-75 0-44-34-71-72-71zm-1-37c30 0 57 13 77 33 0-22 35-22 35 1v150c-1 10 10 16 16 9 25-25 54-128-14-187-64-56-149-47-195-15-48 33-79 107-49 175 33 76 126 99 182 76 28-12 41 26 12 39-45 19-168 17-225-82-38-68-36-185 67-248 78-46 182-33 244 32 66 69 62 197-2 246-28 23-71 1-71-32v-11c-20 20-47 32-77 32-57 0-108-51-108-108 0-58 51-110 108-110" fill="#fff"/></svg>
    </a>
    <a href="https://github.com/wolfrax" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>