<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Raspberry backup using rclone - Wolfblog</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">




<style type="text/css">

/*some stuff for output/input prompts*/
div.cell{border:1px solid transparent;display:-webkit-box;-webkit-box-orient:vertical;-webkit-box-align:stretch;display:-moz-box;-moz-box-orient:vertical;-moz-box-align:stretch;display:box;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch}div.cell.selected{border-radius:4px;border:thin #ababab solid}
div.cell.edit_mode{border-radius:4px;border:thin #008000 solid}
div.cell{width:100%;padding:5px 5px 5px 0;margin:0;outline:none}
div.prompt{min-width:11ex;padding:.4em;margin:0;font-family:monospace;text-align:right;line-height:1.21429em}
@media (max-width:480px){div.prompt{text-align:left}}div.inner_cell{display:-webkit-box;-webkit-box-orient:vertical;-webkit-box-align:stretch;display:-moz-box;-moz-box-orient:vertical;-moz-box-align:stretch;display:box;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch;-webkit-box-flex:1;-moz-box-flex:1;box-flex:1;flex:1}
div.input_area{border:1px solid #cfcfcf;border-radius:4px;background:#f7f7f7;line-height:1.21429em}
div.prompt:empty{padding-top:0;padding-bottom:0}
div.input{page-break-inside:avoid;display:-webkit-box;-webkit-box-orient:horizontal;-webkit-box-align:stretch;display:-moz-box;-moz-box-orient:horizontal;-moz-box-align:stretch;display:box;box-orient:horizontal;box-align:stretch;}
div.inner_cell{width:90%;}
div.input_area{border:1px solid #cfcfcf;border-radius:4px;background:#f7f7f7;}
div.input_prompt{color:navy;border-top:1px solid transparent;}
div.output_wrapper{margin-top:5px;position:relative;display:-webkit-box;-webkit-box-orient:vertical;-webkit-box-align:stretch;display:-moz-box;-moz-box-orient:vertical;-moz-box-align:stretch;display:box;box-orient:vertical;box-align:stretch;width:100%;}
div.output_scroll{height:24em;width:100%;overflow:auto;border-radius:4px;-webkit-box-shadow:inset 0 2px 8px rgba(0, 0, 0, 0.8);-moz-box-shadow:inset 0 2px 8px rgba(0, 0, 0, 0.8);box-shadow:inset 0 2px 8px rgba(0, 0, 0, 0.8);}
div.output_collapsed{margin:0px;padding:0px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-box-align:stretch;display:-moz-box;-moz-box-orient:vertical;-moz-box-align:stretch;display:box;box-orient:vertical;box-align:stretch;width:100%;}
div.out_prompt_overlay{height:100%;padding:0px 0.4em;position:absolute;border-radius:4px;}
div.out_prompt_overlay:hover{-webkit-box-shadow:inset 0 0 1px #000000;-moz-box-shadow:inset 0 0 1px #000000;box-shadow:inset 0 0 1px #000000;background:rgba(240, 240, 240, 0.5);}
div.output_prompt{color:darkred;}

a.anchor-link:link{text-decoration:none;padding:0px 20px;visibility:hidden;}
h1:hover .anchor-link,h2:hover .anchor-link,h3:hover .anchor-link,h4:hover .anchor-link,h5:hover .anchor-link,h6:hover .anchor-link{visibility:visible;}
/* end stuff for output/input prompts*/


.highlight-ipynb .hll { background-color: #ffffcc }
.highlight-ipynb  { background: #f8f8f8; }
.highlight-ipynb .c { color: #408080; font-style: italic } /* Comment */
.highlight-ipynb .err { border: 1px solid #FF0000 } /* Error */
.highlight-ipynb .k { color: #008000; font-weight: bold } /* Keyword */
.highlight-ipynb .o { color: #666666 } /* Operator */
.highlight-ipynb .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight-ipynb .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight-ipynb .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight-ipynb .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight-ipynb .gd { color: #A00000 } /* Generic.Deleted */
.highlight-ipynb .ge { font-style: italic } /* Generic.Emph */
.highlight-ipynb .gr { color: #FF0000 } /* Generic.Error */
.highlight-ipynb .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight-ipynb .gi { color: #00A000 } /* Generic.Inserted */
.highlight-ipynb .go { color: #888888 } /* Generic.Output */
.highlight-ipynb .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight-ipynb .gs { font-weight: bold } /* Generic.Strong */
.highlight-ipynb .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight-ipynb .gt { color: #0044DD } /* Generic.Traceback */
.highlight-ipynb .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight-ipynb .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight-ipynb .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight-ipynb .kp { color: #008000 } /* Keyword.Pseudo */
.highlight-ipynb .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight-ipynb .kt { color: #B00040 } /* Keyword.Type */
.highlight-ipynb .m { color: #666666 } /* Literal.Number */
.highlight-ipynb .s { color: #BA2121 } /* Literal.String */
.highlight-ipynb .na { color: #7D9029 } /* Name.Attribute */
.highlight-ipynb .nb { color: #008000 } /* Name.Builtin */
.highlight-ipynb .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight-ipynb .no { color: #880000 } /* Name.Constant */
.highlight-ipynb .nd { color: #AA22FF } /* Name.Decorator */
.highlight-ipynb .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight-ipynb .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight-ipynb .nf { color: #0000FF } /* Name.Function */
.highlight-ipynb .nl { color: #A0A000 } /* Name.Label */
.highlight-ipynb .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight-ipynb .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight-ipynb .nv { color: #19177C } /* Name.Variable */
.highlight-ipynb .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight-ipynb .w { color: #bbbbbb } /* Text.Whitespace */
.highlight-ipynb .mf { color: #666666 } /* Literal.Number.Float */
.highlight-ipynb .mh { color: #666666 } /* Literal.Number.Hex */
.highlight-ipynb .mi { color: #666666 } /* Literal.Number.Integer */
.highlight-ipynb .mo { color: #666666 } /* Literal.Number.Oct */
.highlight-ipynb .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight-ipynb .sc { color: #BA2121 } /* Literal.String.Char */
.highlight-ipynb .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight-ipynb .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight-ipynb .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight-ipynb .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight-ipynb .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight-ipynb .sx { color: #008000 } /* Literal.String.Other */
.highlight-ipynb .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight-ipynb .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight-ipynb .ss { color: #19177C } /* Literal.String.Symbol */
.highlight-ipynb .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight-ipynb .vc { color: #19177C } /* Name.Variable.Class */
.highlight-ipynb .vg { color: #19177C } /* Name.Variable.Global */
.highlight-ipynb .vi { color: #19177C } /* Name.Variable.Instance */
.highlight-ipynb .il { color: #666666 } /* Literal.Number.Integer.Long */
</style>

<style type="text/css">
/* Overrides of notebook CSS for static HTML export */
div.entry-content {
  overflow: visible;
  padding: 8px;
}
.input_area {
  padding: 0.2em;
}

a.heading-anchor {
 white-space: normal;
}

.rendered_html
code {
 font-size: .8em;
}

pre.ipynb {
  color: black;
  background: #f7f7f7;
  border: none;
  box-shadow: none;
  margin-bottom: 0;
  padding: 0;
  margin: 0px;
  font-size: 13px;
}

/* remove the prompt div from text cells */
div.text_cell .prompt {
    display: none;
}

/* remove horizontal padding from text cells, */
/* so it aligns with outer body text */
div.text_cell_render {
    padding: 0.5em 0em;
}

img.anim_icon{padding:0; border:0; vertical-align:middle; -webkit-box-shadow:none; -box-shadow:none}

div.collapseheader {
    width=100%;
    padding: 2px;
    cursor: pointer;
    font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;
}

</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>
<script type="text/javascript">
init_mathjax = function() {
    if (window.MathJax) {
        // MathJax loaded
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
            },
            displayAlign: 'left', // Change this to 'center' to center equations.
            "HTML-CSS": {
                styles: {'.MathJax_Display': {"margin": 0}}
            }
        });
        MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
    }
}
init_mathjax();
</script>

<link rel="canonical" href="/articles/2020/01/18/raspberry-backup-using-rclone/">

        <meta name="author" content="Mats Melander" />
        <meta name="keywords" content="Raspberry,Google Drive,rclone" />
        <meta name="description" content="A note on using rclone and Google drive" />

        <meta property="og:site_name" content="Wolfblog" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Raspberry backup using rclone"/>
        <meta property="og:url" content="/articles/2020/01/18/raspberry-backup-using-rclone/"/>
        <meta property="og:description" content="A note on using rclone and Google drive"/>
        <meta property="article:published_time" content="2020-01-18" />
            <meta property="article:section" content="Technologies" />
            <meta property="article:tag" content="Raspberry" />
            <meta property="article:tag" content="Google Drive" />
            <meta property="article:tag" content="rclone" />
            <meta property="article:author" content="Mats Melander" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="/components/font-awesome/css/font-awesome.min.css" rel="stylesheet">

<!--    <link href="/theme/css/font-awesome.min.css" rel="stylesheet"> -->

    <link href="/theme/css/pygments/default.css" rel="stylesheet">
    <link rel="stylesheet" href="/theme/css/style.css" type="text/css"/>




</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">
<img class="img-responsive pull-left gap-right" src="/img/Wolf_logo.png" width="30"/> Wolfblog            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                    <li><a href="/archives.html">Archive</a></li>
                         <li><a href="/pages/about/">
                             About
                          </a></li>
                        <li class="active">
                            <a href="/category/technologies">Technologies</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<!-- Banner -->
<!-- End Banner -->

<!-- Content Container -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="/articles/2020/01/18/raspberry-backup-using-rclone/"
                       rel="bookmark"
                       title="Permalink to Raspberry backup using rclone">
                        Raspberry backup using rclone
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2020-01-18T00:00:00+01:00"> Sat 18 January 2020</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="/tag/raspberry">Raspberry</a>
        /
	<a href="/tag/google-drive">Google Drive</a>
        /
	<a href="/tag/rclone">rclone</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>Backing up raspberries using <a class="reference external" href="https://rclone.org/drive/">rclone</a> to Google drive.</p>
<div class="section" id="installation-of-rclone">
<h2>Installation of rclone</h2>
<p>Installation on <strong>rpi1</strong>.</p>
<p><strong>Update</strong>: A good source of information: <a class="reference external" href="https://medium.com/&#64;artur.klauser/mounting-google-drive-on-raspberry-pi-dd15193d8138">Mounting Google Drive on Raspberry Pi</a></p>
<p>Please note the <strong>&quot;INSTRUCTIONS Google Drive Example&quot;</strong> at the end of rclone installation.</p>
<div class="highlight"><pre><span></span>pi@rpi1:~ $ curl -L https://raw.github.com/pageauc/rclone4pi/master/rclone-install.sh <span class="p">|</span> bash
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  <span class="m">0</span>     <span class="m">0</span>    <span class="m">0</span>     <span class="m">0</span>    <span class="m">0</span>     <span class="m">0</span>      <span class="m">0</span>      <span class="m">0</span> --:--:-- --:--:-- --:--:--     <span class="m">0</span>
<span class="m">100</span>  <span class="m">2508</span>  <span class="m">100</span>  <span class="m">2508</span>    <span class="m">0</span>     <span class="m">0</span>   <span class="m">2328</span>      <span class="m">0</span>  <span class="m">0</span>:00:01  <span class="m">0</span>:00:01 --:--:--  136k
bash ver <span class="m">1</span>.6 written by Claude Pageau
-------------------------------------------------------------------------------
--2020-01-18 <span class="m">13</span>:20:27--  https://downloads.rclone.org/rclone-current-linux-arm.zip
Resolving downloads.rclone.org <span class="o">(</span>downloads.rclone.org<span class="o">)</span>... <span class="m">5</span>.153.250.7, 2a02:24e0:8:61f9::1
Connecting to downloads.rclone.org <span class="o">(</span>downloads.rclone.org<span class="o">)</span><span class="p">|</span><span class="m">5</span>.153.250.7<span class="p">|</span>:443... connected.
HTTP request sent, awaiting response... <span class="m">200</span> OK

...snip...

rclone installed at /usr/bin/rclone
-------------------------------------------------------------------------------
                 INSTRUCTIONS Google Drive Example

<span class="m">1</span> You will be required to have a login account on the remote storage service
  Open putty SSH login session to RPI and execute <span class="nb">command</span> below

  rclone config

  Follow rclone prompts. For more Details See
  https://github.com/pageauc/rclone4pi/wiki/Home
<span class="m">2</span> At name&gt; prompt specify a reference name  eg gdmedia
<span class="m">3</span> At storage&gt; prompt Enter a remote storage number from List
<span class="m">4</span> Select Auto Config, At Link: prompt, left click
  and highlight rclone url link <span class="o">(</span><span class="k">do</span> not hit enter<span class="o">)</span>
<span class="m">5</span> on computer web browser url bar right click paste and go.
<span class="m">6</span> On computer web browser security page, Confirm access.
<span class="m">7</span> Copy web browser access security token and paste
  into RPI SSH session rclone prompt. Enter to accept
<span class="m">8</span> To <span class="nb">test</span> remote service access. Execute the following where
  gdmedia is the name you gave your remote service

  rclone ls gdmedia:/

Example sync <span class="nb">command</span> make <span class="nb">source</span> identical to destination

rclone sync -v /home/pi/rpi-sync gdmedia:/rpi-sync

To upgrade

  <span class="nb">cd</span> rpi-sync
  ./rclone-install.sh upgrade

For more Details See https://github.com/pageauc/rclone4pi/wiki/Home
Bye
</pre></div>
</div>
<div class="section" id="configuration-of-rclone">
<h2>Configuration of rclone</h2>
<p>A Google drive item needs to be configured for rclone, below I first remove <tt class="docutils literal">google_drive</tt> (which where wrongly
configured at a previous session) and then recreate a new remote with the same name.</p>
<p><strong>Note</strong></p>
<blockquote>
A <tt class="docutils literal">client id</tt> and its associated <tt class="docutils literal">client secret</tt> needs to be generated at Google, follow these
<a class="reference external" href="https://rclone.org/drive/#making-your-own-client-id">instructions</a> to do this.</blockquote>
<p>In my case, I needed to go to <a class="reference external" href="https://console.developers.google.com/">Google APIs</a>, make sure that my project
<tt class="docutils literal">Viltstigen</tt> where selected (it is by default). Then select &quot;Credentials&quot; to the left on the web page. A number of
previously generated &quot;API keys&quot; will be visible. I selected &quot;API Key 7&quot;, then selected the &quot;Create Credentials&quot; drop
down menu (blue), followed by &quot;OAuth client ID&quot;. New page, select option &quot;Other&quot;, type in a &quot;Name&quot; and click &quot;Create&quot;.
A pop-up screen appears with &quot;client ID&quot; and &quot;client Secret&quot; visible, keep them for the script below.</p>
<p>Note also that I have choosen a &quot;root_folder_id&quot; below, following the instructions
<a class="reference external" href="https://rclone.org/drive/#root-folder-id">here</a>. Essentially, using the Google Drive web interface, create a new
folder (e.g. &quot;rpi_bck&quot;), then move into this folder and copy the last part of the URL.
The string &quot;[...]&quot;, below is inserted in fields where I don't want to expose any information.</p>
<div class="highlight"><pre><span></span>pi@rpi1:~/bck $ rclone config
Current remotes:

Name                 <span class="nv">Type</span>
<span class="o">====</span>                 <span class="o">====</span>
google_drive         drive

e<span class="o">)</span> Edit existing remote
n<span class="o">)</span> New remote
d<span class="o">)</span> Delete remote
r<span class="o">)</span> Rename remote
c<span class="o">)</span> Copy remote
s<span class="o">)</span> Set configuration password
q<span class="o">)</span> Quit config
e/n/d/r/c/s/q&gt; d
Choose a number from below, or <span class="nb">type</span> <span class="k">in</span> an existing value
 <span class="m">1</span> &gt; google_drive
remote&gt; <span class="m">1</span>
No remotes found - make a new one
n<span class="o">)</span> New remote
s<span class="o">)</span> Set configuration password
q<span class="o">)</span> Quit config
n/s/q&gt; n
name&gt; google_drive
Type of storage to configure.
Enter a string value. Press Enter <span class="k">for</span> the default <span class="o">(</span><span class="s2">&quot;&quot;</span><span class="o">)</span>.
Choose a number from below, or <span class="nb">type</span> <span class="k">in</span> your own value
 <span class="m">1</span> / 1Fichier
   <span class="se">\ </span><span class="s2">&quot;fichier&quot;</span>
 <span class="m">2</span> / Alias <span class="k">for</span> an existing remote
   <span class="se">\ </span><span class="s2">&quot;alias&quot;</span>
 <span class="m">3</span> / Amazon Drive
   <span class="se">\ </span><span class="s2">&quot;amazon cloud drive&quot;</span>
 <span class="m">4</span> / Amazon S3 Compliant Storage Provider <span class="o">(</span>AWS, Alibaba, Ceph, Digital Ocean, Dreamhost, IBM COS, Minio, etc<span class="o">)</span>
   <span class="se">\ </span><span class="s2">&quot;s3&quot;</span>
 <span class="m">5</span> / Backblaze B2
   <span class="se">\ </span><span class="s2">&quot;b2&quot;</span>
 <span class="m">6</span> / Box
   <span class="se">\ </span><span class="s2">&quot;box&quot;</span>
 <span class="m">7</span> / Cache a remote
   <span class="se">\ </span><span class="s2">&quot;cache&quot;</span>
 <span class="m">8</span> / Citrix Sharefile
   <span class="se">\ </span><span class="s2">&quot;sharefile&quot;</span>
 <span class="m">9</span> / Dropbox
   <span class="se">\ </span><span class="s2">&quot;dropbox&quot;</span>
<span class="m">10</span> / Encrypt/Decrypt a remote
   <span class="se">\ </span><span class="s2">&quot;crypt&quot;</span>
<span class="m">11</span> / FTP Connection
   <span class="se">\ </span><span class="s2">&quot;ftp&quot;</span>
<span class="m">12</span> / Google Cloud Storage <span class="o">(</span>this is not Google Drive<span class="o">)</span>
   <span class="se">\ </span><span class="s2">&quot;google cloud storage&quot;</span>
<span class="m">13</span> / Google Drive
   <span class="se">\ </span><span class="s2">&quot;drive&quot;</span>
<span class="m">14</span> / Google Photos
   <span class="se">\ </span><span class="s2">&quot;google photos&quot;</span>
<span class="m">15</span> / Hubic
   <span class="se">\ </span><span class="s2">&quot;hubic&quot;</span>
<span class="m">16</span> / JottaCloud
   <span class="se">\ </span><span class="s2">&quot;jottacloud&quot;</span>
<span class="m">17</span> / Koofr
   <span class="se">\ </span><span class="s2">&quot;koofr&quot;</span>
<span class="m">18</span> / Local Disk
   <span class="se">\ </span><span class="s2">&quot;local&quot;</span>
<span class="m">19</span> / Mail.ru Cloud
   <span class="se">\ </span><span class="s2">&quot;mailru&quot;</span>
<span class="m">20</span> / Mega
   <span class="se">\ </span><span class="s2">&quot;mega&quot;</span>
<span class="m">21</span> / Microsoft Azure Blob Storage
   <span class="se">\ </span><span class="s2">&quot;azureblob&quot;</span>
<span class="m">22</span> / Microsoft OneDrive
   <span class="se">\ </span><span class="s2">&quot;onedrive&quot;</span>
<span class="m">23</span> / OpenDrive
   <span class="se">\ </span><span class="s2">&quot;opendrive&quot;</span>
<span class="m">24</span> / Openstack Swift <span class="o">(</span>Rackspace Cloud Files, Memset Memstore, OVH<span class="o">)</span>
   <span class="se">\ </span><span class="s2">&quot;swift&quot;</span>
<span class="m">25</span> / Pcloud
   <span class="se">\ </span><span class="s2">&quot;pcloud&quot;</span>
<span class="m">26</span> / Put.io
   <span class="se">\ </span><span class="s2">&quot;putio&quot;</span>
<span class="m">27</span> / QingCloud Object Storage
   <span class="se">\ </span><span class="s2">&quot;qingstor&quot;</span>
<span class="m">28</span> / SSH/SFTP Connection
   <span class="se">\ </span><span class="s2">&quot;sftp&quot;</span>
<span class="m">29</span> / Transparently chunk/split large files
   <span class="se">\ </span><span class="s2">&quot;chunker&quot;</span>
<span class="m">30</span> / Union merges the contents of several remotes
   <span class="se">\ </span><span class="s2">&quot;union&quot;</span>
<span class="m">31</span> / Webdav
   <span class="se">\ </span><span class="s2">&quot;webdav&quot;</span>
<span class="m">32</span> / Yandex Disk
   <span class="se">\ </span><span class="s2">&quot;yandex&quot;</span>
<span class="m">33</span> / http Connection
   <span class="se">\ </span><span class="s2">&quot;http&quot;</span>
<span class="m">34</span> / premiumize.me
   <span class="se">\ </span><span class="s2">&quot;premiumizeme&quot;</span>
Storage&gt; <span class="m">13</span>
** See <span class="nb">help</span> <span class="k">for</span> drive backend at: https://rclone.org/drive/ **

Google Application Client Id
Setting your own is recommended.
See https://rclone.org/drive/#making-your-own-client-id <span class="k">for</span> how to create your own.
If you leave this blank, it will use an internal key which is low performance.
Enter a string value. Press Enter <span class="k">for</span> the default <span class="o">(</span><span class="s2">&quot;&quot;</span><span class="o">)</span>.
client_id&gt; <span class="o">[</span>...<span class="o">]</span>
Google Application Client Secret
Setting your own is recommended.
Enter a string value. Press Enter <span class="k">for</span> the default <span class="o">(</span><span class="s2">&quot;&quot;</span><span class="o">)</span>.
client_secret&gt; <span class="o">[</span>...<span class="o">]</span>
Scope that rclone should use when requesting access from drive.
Enter a string value. Press Enter <span class="k">for</span> the default <span class="o">(</span><span class="s2">&quot;&quot;</span><span class="o">)</span>.
Choose a number from below, or <span class="nb">type</span> <span class="k">in</span> your own value
 <span class="m">1</span> / Full access all files, excluding Application Data Folder.
   <span class="se">\ </span><span class="s2">&quot;drive&quot;</span>
 <span class="m">2</span> / Read-only access to file metadata and file contents.
   <span class="se">\ </span><span class="s2">&quot;drive.readonly&quot;</span>
   / Access to files created by rclone only.
 <span class="m">3</span> <span class="p">|</span> These are visible <span class="k">in</span> the drive website.
   <span class="p">|</span> File authorization is revoked when the user deauthorizes the app.
   <span class="se">\ </span><span class="s2">&quot;drive.file&quot;</span>
   / Allows <span class="nb">read</span> and write access to the Application Data folder.
 <span class="m">4</span> <span class="p">|</span> This is not visible <span class="k">in</span> the drive website.
   <span class="se">\ </span><span class="s2">&quot;drive.appfolder&quot;</span>
   / Allows read-only access to file metadata but
 <span class="m">5</span> <span class="p">|</span> does not allow any access to <span class="nb">read</span> or download file content.
   <span class="se">\ </span><span class="s2">&quot;drive.metadata.readonly&quot;</span>
scope&gt; <span class="m">3</span>
ID of the root folder
Leave blank normally.

Fill <span class="k">in</span> to access <span class="s2">&quot;Computers&quot;</span> folders <span class="o">(</span>see docs<span class="o">)</span>, or <span class="k">for</span> rclone to use
a non root folder as its starting point.

Note that <span class="k">if</span> this is blank, the first <span class="nb">time</span> rclone runs it will fill it
<span class="k">in</span> with the ID of the root folder.

Enter a string value. Press Enter <span class="k">for</span> the default <span class="o">(</span><span class="s2">&quot;&quot;</span><span class="o">)</span>.
root_folder_id&gt; <span class="o">[</span>...<span class="o">]</span>
Service Account Credentials JSON file path
Leave blank normally.
Needed only <span class="k">if</span> you want use SA instead of interactive login.
Enter a string value. Press Enter <span class="k">for</span> the default <span class="o">(</span><span class="s2">&quot;&quot;</span><span class="o">)</span>.
service_account_file&gt;
Edit advanced config? <span class="o">(</span>y/n<span class="o">)</span>
y<span class="o">)</span> Yes
n<span class="o">)</span> No
y/n&gt; n
Remote config
Use auto config?
 * Say Y <span class="k">if</span> not sure
 * Say N <span class="k">if</span> you are working on a remote or headless machine
y<span class="o">)</span> Yes
n<span class="o">)</span> No
y/n&gt; n
If your browser doesn<span class="err">&#39;</span>t open automatically go to the following link: <span class="o">[</span>...<span class="o">]</span>
Log <span class="k">in</span> and authorize rclone <span class="k">for</span> access
Enter verification code&gt; <span class="o">[</span>...<span class="o">]</span>
Configure this as a team drive?
y<span class="o">)</span> Yes
n<span class="o">)</span> No
y/n&gt; n
--------------------
<span class="o">[</span>google_drive<span class="o">]</span>
<span class="nb">type</span> <span class="o">=</span> drive
<span class="nv">client_id</span> <span class="o">=</span> <span class="o">[</span>...<span class="o">]</span>
<span class="nv">client_secret</span> <span class="o">=</span> <span class="o">[</span>...<span class="o">]</span>
<span class="nv">scope</span> <span class="o">=</span> drive.file
<span class="nv">root_folder_id</span> <span class="o">=</span> <span class="o">[</span>...<span class="o">]</span>
<span class="nv">token</span> <span class="o">=</span> <span class="o">{</span><span class="s2">&quot;access_token&quot;</span>:<span class="s2">&quot;[...]&quot;</span>,<span class="s2">&quot;token_type&quot;</span>:<span class="s2">&quot;Bearer&quot;</span>,<span class="s2">&quot;refresh_token&quot;</span>:<span class="s2">&quot;[...]&quot;</span>,<span class="s2">&quot;expiry&quot;</span>:<span class="s2">&quot;2020-01-18T17:09:31.820516378+01:00&quot;</span><span class="o">}</span>
--------------------
y<span class="o">)</span> Yes this is OK
e<span class="o">)</span> Edit this remote
d<span class="o">)</span> Delete this remote
y/e/d&gt; y
Current remotes:

Name                 <span class="nv">Type</span>
<span class="o">====</span>                 <span class="o">====</span>
google_drive         drive

e<span class="o">)</span> Edit existing remote
n<span class="o">)</span> New remote
d<span class="o">)</span> Delete remote
r<span class="o">)</span> Rename remote
c<span class="o">)</span> Copy remote
s<span class="o">)</span> Set configuration password
q<span class="o">)</span> Quit config
e/n/d/r/c/s/q&gt; q
</pre></div>
<p>Now try rclone by copying a file (e.g. &quot;backup.log&quot;) to &quot;google_drive&quot; and create a new folder &quot;rpi1&quot;. Then list
content in &quot;google_drive&quot;, folder &quot;rpi&quot; to verify that the file is there. Finally list folders visible in &quot;google_drive&quot;.</p>
<div class="highlight"><pre><span></span>pi@rpi1:~/bck $ rclone copy backup.log google_drive:rpi1
pi@rpi1:~/bck $ rclone ls google_drive:rpi1
  <span class="m">1104214</span> backup.log
pi@rpi1:~/bck $ rclone lsd google_drive:
          -1 <span class="m">2020</span>-01-18 <span class="m">16</span>:10:44        -1 rpi1
</pre></div>
</div>
<div class="section" id="backup">
<h2>Backup</h2>
<p>Now <tt class="docutils literal">rclone</tt> can be used to backup files to Google Drive.</p>
<div class="section" id="rpi1-backup">
<h3>rpi1 backup</h3>
<p><strong>rpi1</strong> have an additional USB memory installed. Production data is stored in Mongo database.</p>
<p>Plug the USB memory into a USB port and it should be automatically mounted by the raspberry on <tt class="docutils literal">/dev/sda*</tt>,
for example <tt class="docutils literal">/dev/sda1</tt>.</p>
<p>To check availability do</p>
<div class="highlight"><pre><span></span>$ sudo lsblk -f

NAME        FSTYPE LABEL    UUID                                 MOUNTPOINT
sda
└─sda1      vfat            8F3F-8E75                            /media/pi/8F3F-8E75
mmcblk0
├─mmcblk0p1 vfat   RECOVERY <span class="m">6363</span>-3634
├─mmcblk0p2
├─mmcblk0p5 ext4   SETTINGS 444485b7-f8cb-4f4c-8b9a-6fedf94efed1 /media/pi/SETTINGS
├─mmcblk0p6 vfat   boot     <span class="m">0181</span>-4B93                            /boot
└─mmcblk0p7 ext4   root     65b49769-3b56-43b9-b037-bf4a8da3a41a /
</pre></div>
<p>Note the mount point for the USB memory stick <tt class="docutils literal"><span class="pre">/media/pi/8F3F-8E75</span></tt>, make a softlink for more convenient access,
for example <tt class="docutils literal">$ ln <span class="pre">-s</span> <span class="pre">/media/pi/8F3F-8E75/</span> /home/pi/bck/</tt>.</p>
<p>If needed format the USB memory stick through <tt class="docutils literal">$ sudo mkfs.vfat /dev/sda1 <span class="pre">-n</span> untitled</tt>.
If the mkfs.vfat command is not available install &quot;dosfstools&quot; first through <tt class="docutils literal">$ sudo <span class="pre">apt-get</span> install dosfstools</tt>.</p>
<p>Now add the following content into a file named backup.sh:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env bash</span>
<span class="c1">#</span>
<span class="c1"># Daily backup from /etc/crontab</span>
<span class="c1">#</span>
<span class="c1"># Adopted from &lt;https://help.ubuntu.com/lts/serverguide/backup-shellscripts.html&gt;</span>
<span class="c1"># and &lt;http://www.tldp.org/LDP/solrhe/Securing-  Optimizing-Linux-RH-Edition-v1.3/chap29sec306.html&gt;</span>
<span class="c1">#</span>
<span class="c1"># To list: tar -tzvf /home/pi/bck/host-Monday.tgz</span>
<span class="c1"># To restore: tar -xzvf /home/pi/bck/host-Monday.tgz -C /tmp etc/hosts (restore /etc/hosts file to /etc/tmp/hosts)</span>
<span class="c1"># Notice the leading &quot;/&quot; is left off the path of the file to restore.</span>
<span class="c1"># To restore all (overwrites everything):</span>
<span class="c1">#   cd</span>
<span class="c1">#   sudo tar -xzvf /home/pi/bck/host-Monday.tgz</span>

<span class="c1"># What to backup</span>
<span class="nv">backup_files</span><span class="o">=</span><span class="s2">&quot;/home/pi/.ssh /home/pi/app&quot;</span>

<span class="c1"># Where to backup to.</span>
<span class="c1"># Note, this is a softlinked directory to /media/pi/8F3F-8E75/bck which resides on a separate USB  flash memory</span>
<span class="nv">dest</span><span class="o">=</span><span class="s2">&quot;/home/pi/bck&quot;</span>

<span class="c1"># Create archive filename.</span>
<span class="nv">day</span><span class="o">=</span><span class="k">$(</span>date +%A<span class="k">)</span>
<span class="nv">hostname</span><span class="o">=</span><span class="k">$(</span>hostname -s<span class="k">)</span>
<span class="nv">archive_file</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$hostname</span><span class="s2">-</span><span class="nv">$day</span><span class="s2">.tgz&quot;</span>

<span class="c1"># Print start status message.</span>
<span class="nb">echo</span> <span class="s2">&quot;-----&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;Backing up </span><span class="nv">$backup_files</span><span class="s2"> to </span><span class="nv">$dest</span><span class="s2">/</span><span class="nv">$archive_file</span><span class="s2">&quot;</span>
date
<span class="nb">echo</span>

<span class="c1"># Backup the files using tar.</span>
tar czf <span class="nv">$dest</span>/<span class="nv">$archive_file</span> <span class="nv">$backup_files</span>

<span class="c1"># Print end status message.</span>
<span class="nb">echo</span>
<span class="nb">echo</span> <span class="s2">&quot;Backup finished&quot;</span>
date

<span class="c1"># Long listing of files in $dest to check file sizes.</span>
ls -lh <span class="nv">$dest</span>/
<span class="nb">echo</span> <span class="s2">&quot;-----&quot;</span>
</pre></div>
<p>Then do <tt class="docutils literal">$ chmod a+x backup.sh</tt>, the script is executed through user crontab (not /etc/crontab) by inserting this line</p>
<div class="highlight"><pre><span></span><span class="m">00</span> <span class="m">2</span>    * * *   sh /home/pi/rpi1/app/RPiscripts/backup.sh &gt;&gt; /home/pi/bck/backup.log <span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
</pre></div>
<p>Thus, by 2:00am the script is executed. Note that the folder <tt class="docutils literal">home/pi/app</tt> is included although no production data
is there. I then upload to Google Drive by this line in the same crontab at 4:00am.</p>
<div class="highlight"><pre><span></span><span class="m">00</span> <span class="m">4</span>    * * *   rclone sync /home/pi/bck/ google_drive:rpi1
</pre></div>
</div>
<div class="section" id="rpi3-backup">
<h3>rpi3 backup</h3>
<p>For <strong>rpi3</strong> I have 2 files that is of &quot;production type&quot;, ie generated by a program. These are synched to Google Drive
once per hour from crontab entries</p>
<div class="highlight"><pre><span></span><span class="m">0</span> * * * * rclone sync /home/pi/app/spots/radar/spots_stats.json google_drive:spots
<span class="m">0</span> * * * * rclone sync /home/pi/app/spots/radar/spots_stats.json.1 google_drive:spots
</pre></div>
<p><strong>Note</strong></p>
<blockquote>
When google_drive is setup when installing rclone on <strong>rpi3</strong>, the root is different compared to <strong>rpi1</strong>.
For <strong>rpi3</strong> it points to <tt class="docutils literal">rpi_bck/rpi3</tt> on Google Drive, while for <strong>rpi1</strong> it points to <tt class="docutils literal">`rpi_bck</tt>.
Thus, for <strong>rpi1</strong> an additional suffix is needed to store files at <tt class="docutils literal">rpi_bck/rpi1</tt> by using <tt class="docutils literal">google_drive:rpi1</tt>
in rclone commands on <strong>rpi1</strong> compared to <strong>rpi3</strong>.</blockquote>
</div>
</div>

            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Recent Posts -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Recent Posts</span></h4>
  <ul class="list-group" id="recentposts">
    <li class="list-group-item"><a href="/articles/2021/11/08/visualizing-wind-using-leaflet/">Visualizing wind using Leaflet</a></li>
    <li class="list-group-item"><a href="/articles/2021/09/13/flask-application-behind-a-reverse-proxy/">Flask application behind a reverse proxy</a></li>
    <li class="list-group-item"><a href="/articles/2021/07/14/setting-referer-policy-when-using-applause-button/">Setting referer policy when using applause button</a></li>
    <li class="list-group-item"><a href="/articles/2021/05/02/mdns-for-linux/">mDNS for Linux</a></li>
    <li class="list-group-item"><a href="/articles/2020/10/07/rsyslog-daemon-filling-syslog/">rsyslog daemon filling syslog</a></li>
  </ul>
</li>
<!-- End Sidebar/Recent Posts -->

<!-- Sidebar/Github -->
<li class="list-group-item">
  <h4><i class="fa fa-github fa-lg"></i><span class="icon-label">GitHub Repos</span></h4>
  <div id="gh_repos">
    <p class="list-group-item">Status updating...</p>
  </div>
</li>
<!-- End Sidebar/Github -->

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="https://www.viltstigen.se/" target="_blank">Viltstigen</a>
    </li>
    <li class="list-group-item">
      <a href="http://wlog.viltstigen.se/" target="_blank">Wolfblog</a>
    </li>
    <li class="list-group-item">
      <a href="https://github.com/wolfrax" target="_blank">Github</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->

<!-- Sidebar/Archive -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Archive</span></h4>
  <ul class="list-group" id="archive">
        <li class="list-group-item">
          <a href="/archive/2021/Nov/index.html"><i class="fa fa-calendar fa-lg"></i>November 2021 (1)
          </a>
        </li>
        <li class="list-group-item">
          <a href="/archive/2021/Sep/index.html"><i class="fa fa-calendar fa-lg"></i>September 2021 (1)
          </a>
        </li>
        <li class="list-group-item">
          <a href="/archive/2021/Jul/index.html"><i class="fa fa-calendar fa-lg"></i>July 2021 (1)
          </a>
        </li>
        <li class="list-group-item">
          <a href="/archive/2021/May/index.html"><i class="fa fa-calendar fa-lg"></i>May 2021 (1)
          </a>
        </li>
        <li class="list-group-item">
          <a href="/archive/2020/Oct/index.html"><i class="fa fa-calendar fa-lg"></i>October 2020 (2)
          </a>
        </li>
        <li class="list-group-item">
          <a href="/archive/2020/Jul/index.html"><i class="fa fa-calendar fa-lg"></i>July 2020 (2)
          </a>
        </li>
        <li class="list-group-item">
          <a href="/archive/2020/Jun/index.html"><i class="fa fa-calendar fa-lg"></i>June 2020 (1)
          </a>
        </li>
        <li class="list-group-item">
          <a href="/archive/2020/Feb/index.html"><i class="fa fa-calendar fa-lg"></i>February 2020 (6)
          </a>
        </li>
        <li class="list-group-item">
          <a href="/archive/2020/Jan/index.html"><i class="fa fa-calendar fa-lg"></i>January 2020 (11)
          </a>
        </li>
  </ul>
</li>
<!-- End Sidebar/Archive -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<!-- End Content Container -->

<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2021 Mats Melander
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="/theme/js/respond.min.js"></script>



<!-- GitHub JS Code -->
<script type="text/javascript">
$(document).ready(function () {
  if (!window.jXHR) {
    var jxhr = document.createElement('script');
    jxhr.type = 'text/javascript';
    jxhr.src = '/theme/js/jXHR.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(jxhr, s);
  }

  github.showRepos({
    user: 'wolfrax',
    count: 5,
    skip_forks: false,
    target: '#gh_repos'
  });
});
</script>
<script src="/theme/js/github.js" type="text/javascript"></script>
<!-- End GitHub JS Code -->

<script type="text/javascript">
jQuery(document).ready(function($) {
    $("div.collapseheader").click(function () {
    $header = $(this).children("span").first();
    $codearea = $(this).children(".input_area");
    console.log($(this).children());
    $codearea.slideToggle(500, function () {
        $header.text(function () {
            return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
        });
    });
});
});
</script>
</body>
</html>